import {moveDocuments, setUpTestDocuments, checkIfDocsMoved, cleanUp} from './MoveDocuments'

import {db} from '../../Shared/firestore'

/* <-- Import End --> */


/* <-- Variable Definition End --> */



describe("CleanRequests", () => {
  it("Should move documents from one collection to another", async () => {
    await setUpTestDocuments(10, 'requests', db)
    await moveDocuments('pending', 'requests', db)
    await checkCollectionLength('pending', 10)
    const pendingDocSnaps = await checkIfDocsMoved(db)
    await cleanUp(pendingDocSnaps, db)
    return
  });
});

async function checkCollectionLength(collection: string, expectedLength: number) {
  const requestsSnapInital = await db.collection(collection).get()
  const requestsDocsInital = requestsSnapInital.docs.map((doc: any) => doc.data())
  expect(requestsDocsInital.length).toBe(expectedLength)
}
// adds two numbers
// 
